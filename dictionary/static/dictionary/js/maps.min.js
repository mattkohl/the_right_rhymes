function initializeMaps(){setTimeout("initializeMapsDelay();",100)}function initializeMapsDelay(){$.each($(".map-canvas"),function(a){var t=a+1,e=new mapboxgl.Map({container:"map"+t,style:"mapbox://styles/mattkohl/cjzbh31rv0g3c1cpcos3l17xv"}),n=$(this).find(".sense_id").text(),o=$(this).find(".artist-slug").text(),i=$(this).find(".place-slug").text();o?endpoint="/data/artists/"+o+"/geojson?format=json":i?endpoint="/data/places/"+i+"/geojson?format=json":endpoint="/data/senses/"+n+"/artists/geojson?format=json",$.getJSON(endpoint,{csrfmiddlewaretoken:"{{csrf_token}}"},function(a){e.on("load",function(){e.addSource("points",{type:"geojson",data:a}),e.addLayer({id:"heatmap-12",source:"points",type:"heatmap",paint:{"heatmap-radius":12,"heatmap-color":["interpolate",["linear"],["heatmap-density"],0,"rgba(33,102,172,0)",.2,"rgb(103,169,207)",.4,"rgb(209,229,240)",.6,"rgb(253,219,199)",.8,"rgb(239,138,98)",1,"rgb(178,24,43)"]}})}),e.scrollZoom.disable(),e.addControl(new mapboxgl.NavigationControl);var t=new mapboxgl.LngLatBounds;a.features.forEach(function(a){t.extend(a.geometry.coordinates)}),e.fitBounds(t,{padding:50})})})}mapboxgl.accessToken=mapsToken,initializeMaps();