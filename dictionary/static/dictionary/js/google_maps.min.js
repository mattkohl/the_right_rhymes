$(document).ready(function(){$(function(){google.maps.event.addDomListener(window,"load",function(){var e,t=new google.maps.LatLng(40.650002,-73.949997),s=!("ontouchstart"in document.documentElement),a={zoom:10,center:t,mapTypeId:google.maps.MapTypeId.ROADMAP,backgroundColor:"#eeeeee",draggable:s},o=new google.maps.StyledMapType([{featureType:"all",elementType:"labels.text.fill",stylers:[{saturation:36},{color:"#000000"},{lightness:40}]},{featureType:"all",elementType:"labels.text.stroke",stylers:[{visibility:"on"},{color:"#000000"},{lightness:16}]},{featureType:"all",elementType:"labels.icon",stylers:[{visibility:"off"}]},{featureType:"administrative",elementType:"geometry.fill",stylers:[{color:"#000000"},{lightness:20}]},{featureType:"administrative",elementType:"geometry.stroke",stylers:[{color:"#000000"},{lightness:17},{weight:1.2}]},{featureType:"landscape",elementType:"geometry",stylers:[{color:"#000000"},{lightness:20}]},{featureType:"poi",elementType:"geometry",stylers:[{color:"#000000"},{lightness:21}]},{featureType:"road.highway",elementType:"geometry.fill",stylers:[{color:"#000000"},{lightness:17}]},{featureType:"road.highway",elementType:"geometry.stroke",stylers:[{color:"#000000"},{lightness:29},{weight:.2}]},{featureType:"road.arterial",elementType:"geometry",stylers:[{color:"#000000"},{lightness:18}]},{featureType:"road.local",elementType:"geometry",stylers:[{color:"#000000"},{lightness:16}]},{featureType:"transit",elementType:"geometry",stylers:[{color:"#000000"},{lightness:19}]},{featureType:"water",elementType:"geometry",stylers:[{color:"#000000"},{lightness:17}]},{featureType:"water",elementType:"geometry.fill",stylers:[{saturation:"-100"},{lightness:"-100"},{gamma:"0.00"}]}],{name:"Grayscale"});$.each($(".map-canvas"),function(t){var s=t+1,n=new google.maps.Map(document.getElementById("map"+s),a);n.mapTypes.set("grey",o),n.setMapTypeId("grey"),n.setOptions({zoomControl:!1,mapTypeControl:!1,streetViewControl:!1});var l=new google.maps.MVCArray([]),r=new google.maps.visualization.HeatmapLayer({data:l,map:n});r.set("radius",12),r.set("opacity",.8);var i=!0,g=(new google.maps.InfoWindow({content:""}),new google.maps.LatLngBounds),p=$(this).find(".sense_id").text(),y=$(this).find(".artist-slug").text(),m=$(this).find(".place-slug").text();function d(e){$.each(e,function(e,t){null!=t&&t.origin&&(tmpLatLng=new google.maps.LatLng(t.origin.latitude,t.origin.longitude),l.push(tmpLatLng),g.extend(tmpLatLng),n.fitBounds(g))})}y?(e="/data/artists/"+y+"/",i=!1):m?(e="/data/places/"+m+"/",i=!1):e="/data/senses/"+p+"/artists/",$.getJSON(e,{csrfmiddlewaretoken:"{{csrf_token}}"},function(e){var t;y?d(e.artists):m?(t=e.places,$.each(t,function(e,t){null!=t&&t.latitude&&(tmpLatLng=new google.maps.LatLng(t.latitude,t.longitude),l.push(tmpLatLng),g.extend(tmpLatLng),n.fitBounds(g))})):d(e.senses)}),i||(zoomChangeBoundsListener=google.maps.event.addListener(n,"bounds_changed",function(e){this.setZoom(10)}))})})})});