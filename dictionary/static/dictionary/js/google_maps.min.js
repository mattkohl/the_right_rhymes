var mapDelay=2;function initializeMaps(){setTimeout("initializeMapsDelay();",1e3*mapDelay)}function initializeMapsDelay(){var e;console.log("loading maps");var t=new google.maps.LatLng(40.650002,-73.949997),a=!("ontouchstart"in document.documentElement),s={zoom:10,center:t,mapTypeId:google.maps.MapTypeId.ROADMAP,backgroundColor:"#eeeeee",draggable:a},o=new google.maps.StyledMapType([{featureType:"all",elementType:"labels.text.fill",stylers:[{saturation:36},{color:"#000000"},{lightness:40}]},{featureType:"all",elementType:"labels.text.stroke",stylers:[{visibility:"on"},{color:"#000000"},{lightness:16}]},{featureType:"all",elementType:"labels.icon",stylers:[{visibility:"off"}]},{featureType:"administrative",elementType:"geometry.fill",stylers:[{color:"#000000"},{lightness:20}]},{featureType:"administrative",elementType:"geometry.stroke",stylers:[{color:"#000000"},{lightness:17},{weight:1.2}]},{featureType:"landscape",elementType:"geometry",stylers:[{color:"#000000"},{lightness:20}]},{featureType:"poi",elementType:"geometry",stylers:[{color:"#000000"},{lightness:21}]},{featureType:"road.highway",elementType:"geometry.fill",stylers:[{color:"#000000"},{lightness:17}]},{featureType:"road.highway",elementType:"geometry.stroke",stylers:[{color:"#000000"},{lightness:29},{weight:.2}]},{featureType:"road.arterial",elementType:"geometry",stylers:[{color:"#000000"},{lightness:18}]},{featureType:"road.local",elementType:"geometry",stylers:[{color:"#000000"},{lightness:16}]},{featureType:"transit",elementType:"geometry",stylers:[{color:"#000000"},{lightness:19}]},{featureType:"water",elementType:"geometry",stylers:[{color:"#000000"},{lightness:17}]},{featureType:"water",elementType:"geometry.fill",stylers:[{saturation:"-100"},{lightness:"-100"},{gamma:"0.00"}]}],{name:"Grayscale"});$.each($(".map-canvas"),function(t){var a=t+1,l=new google.maps.Map(document.getElementById("map"+a),s);l.mapTypes.set("grey",o),l.setMapTypeId("grey"),l.setOptions({zoomControl:!1,mapTypeControl:!1,streetViewControl:!1});var n=new google.maps.MVCArray([]),i=new google.maps.visualization.HeatmapLayer({data:n,map:l});i.set("radius",20),i.set("opacity",.8);var r=!0,g=(new google.maps.InfoWindow({content:""}),new google.maps.LatLngBounds),p=$(this).find(".sense_id").text(),y=$(this).find(".artist-slug").text(),m=$(this).find(".place-slug").text();function u(e){$.each(e,function(e,t){null!=t&&t.origin&&(tmpLatLng=new google.maps.LatLng(t.origin.latitude,t.origin.longitude),n.push({location:tmpLatLng,weight:Math.pow(1.6,t.count)}),g.extend(tmpLatLng),l.fitBounds(g))})}y?(e="/data/artists/"+y+"/",r=!1):m?(e="/data/places/"+m+"/",r=!1):e="/data/senses/"+p+"/artists/",$.getJSON(e,{csrfmiddlewaretoken:"{{csrf_token}}"},function(e){var t;y?u(e.artists):m?(t=e.places,$.each(t,function(e,t){null!=t&&t.latitude&&(tmpLatLng=new google.maps.LatLng(t.latitude,t.longitude),n.push(tmpLatLng),g.extend(tmpLatLng),l.fitBounds(g))})):u(e.senses)}),r||(zoomChangeBoundsListener=google.maps.event.addListener(l,"bounds_changed",function(e){this.setZoom(10)}))})}