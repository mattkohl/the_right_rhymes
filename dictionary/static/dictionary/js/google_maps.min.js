$(document).ready(function(){$(function(){google.maps.event.addDomListener(window,"load",function(){var e,t=new google.maps.LatLng(40.650002,-73.949997),a=!("ontouchstart"in document.documentElement),n={zoom:10,center:t,mapTypeId:google.maps.MapTypeId.ROADMAP,scrollwheel:!1,backgroundColor:"#eeeeee",draggable:a},o=new google.maps.StyledMapType([{featureType:"all",elementType:"labels.text.fill",stylers:[{saturation:36},{color:"#000000"},{lightness:40}]},{featureType:"all",elementType:"labels.text.stroke",stylers:[{visibility:"on"},{color:"#000000"},{lightness:16}]},{featureType:"all",elementType:"labels.icon",stylers:[{visibility:"off"}]},{featureType:"administrative",elementType:"geometry.fill",stylers:[{color:"#000000"},{lightness:20}]},{featureType:"administrative",elementType:"geometry.stroke",stylers:[{color:"#000000"},{lightness:17},{weight:1.2}]},{featureType:"landscape",elementType:"geometry",stylers:[{color:"#000000"},{lightness:20}]},{featureType:"poi",elementType:"geometry",stylers:[{color:"#000000"},{lightness:21}]},{featureType:"road.highway",elementType:"geometry.fill",stylers:[{color:"#000000"},{lightness:17}]},{featureType:"road.highway",elementType:"geometry.stroke",stylers:[{color:"#000000"},{lightness:29},{weight:.2}]},{featureType:"road.arterial",elementType:"geometry",stylers:[{color:"#000000"},{lightness:18}]},{featureType:"road.local",elementType:"geometry",stylers:[{color:"#000000"},{lightness:16}]},{featureType:"transit",elementType:"geometry",stylers:[{color:"#000000"},{lightness:19}]},{featureType:"water",elementType:"geometry",stylers:[{color:"#000000"},{lightness:17}]},{featureType:"water",elementType:"geometry.fill",stylers:[{saturation:"-100"},{lightness:"-100"},{gamma:"0.00"}]}],{name:"Grayscale"});$.each($(".map-canvas"),function(t){var a=t+1,s=new google.maps.Map(document.getElementById("map"+a),n);s.mapTypes.set("grey",o),s.setMapTypeId("grey"),s.setOptions({zoomControl:!1,mapTypeControl:!1,streetViewControl:!1});var r=[],l=new MarkerClusterer(s);l.setGridSize(1e3);var i=!0,g=new google.maps.InfoWindow({content:""}),m=new google.maps.LatLngBounds,p=$(this).find(".sense_id").text(),y=$(this).find(".artist-slug").text(),u=$(this).find(".place-slug").text();function d(e){$.each(e,function(e,t){if(null!=t&&t.origin){tmpLatLng=new google.maps.LatLng(t.origin.latitude,t.origin.longitude),t.name?markerText="<b>"+t.name+"</b><br><a href='/places/"+t.origin.slug+"/'>"+t.origin.name+"</a>":markerText=t.origin.name;var a=new google.maps.Marker({map:s,position:tmpLatLng,title:markerText,animation:google.maps.Animation.DROP,url:"/places/"+t.origin.slug+"/"});m.extend(tmpLatLng),c(a,s,g,markerText),r.push(a),l.addMarker(a),s.fitBounds(m)}})}y?(e="/data/artists/"+y+"/",i=!1):u?(e="/data/places/"+u+"/",i=!1):e="/data/senses/"+p+"/artists/",$.getJSON(e,{csrfmiddlewaretoken:"{{csrf_token}}"},function(e){var t;y?d(e.artists):u?(t=e.places,$.each(t,function(e,t){if(null!=t&&t.latitude){tmpLatLng=new google.maps.LatLng(t.latitude,t.longitude),t.name?markerText="<b>"+t.name+"</b><br><a href='/places/"+t.slug+"/'>"+t.name+"</a>":markerText=t.name;var a=new google.maps.Marker({map:s,position:tmpLatLng,title:markerText,animation:google.maps.Animation.DROP,url:"/places/"+t.slug+"/"});m.extend(tmpLatLng),c(a,s,g,markerText),r.push(a),l.addMarker(a),s.fitBounds(m)}})):d(e.senses)}),i||(zoomChangeBoundsListener=google.maps.event.addListener(s,"bounds_changed",function(e){this.setZoom(10)}));var c=function(e,t,a,n){google.maps.event.addListener(e,"click",function(){a.setContent(n),a.open(t,e)})}})})})});