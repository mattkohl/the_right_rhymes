$(document).ready(function(){$(function(){function a(){var a,b=new google.maps.LatLng(40.650002,-73.949997),c=!("ontouchstart"in document.documentElement),d=[{featureType:"all",elementType:"labels.text.fill",stylers:[{saturation:36},{color:"#000000"},{lightness:40}]},{featureType:"all",elementType:"labels.text.stroke",stylers:[{visibility:"on"},{color:"#000000"},{lightness:16}]},{featureType:"all",elementType:"labels.icon",stylers:[{visibility:"off"}]},{featureType:"administrative",elementType:"geometry.fill",stylers:[{color:"#000000"},{lightness:20}]},{featureType:"administrative",elementType:"geometry.stroke",stylers:[{color:"#000000"},{lightness:17},{weight:1.2}]},{featureType:"landscape",elementType:"geometry",stylers:[{color:"#000000"},{lightness:20}]},{featureType:"poi",elementType:"geometry",stylers:[{color:"#000000"},{lightness:21}]},{featureType:"road.highway",elementType:"geometry.fill",stylers:[{color:"#000000"},{lightness:17}]},{featureType:"road.highway",elementType:"geometry.stroke",stylers:[{color:"#000000"},{lightness:29},{weight:.2}]},{featureType:"road.arterial",elementType:"geometry",stylers:[{color:"#000000"},{lightness:18}]},{featureType:"road.local",elementType:"geometry",stylers:[{color:"#000000"},{lightness:16}]},{featureType:"transit",elementType:"geometry",stylers:[{color:"#000000"},{lightness:19}]},{featureType:"water",elementType:"geometry",stylers:[{color:"#000000"},{lightness:17}]},{featureType:"water",elementType:"geometry.fill",stylers:[{saturation:"-100"},{lightness:"-100"},{gamma:"0.00"}]}],e={zoom:10,center:b,mapTypeId:google.maps.MapTypeId.ROADMAP,scrollwheel:!1,backgroundColor:"#eeeeee",draggable:c},f=new google.maps.StyledMapType(d,{name:"Grayscale"});$.each($(".map-canvas"),function(b){function o(a){$.each(a,function(a,b){if(null!=b&&b.origin){tmpLatLng=new google.maps.LatLng(b.origin.latitude,b.origin.longitude),b.name?markerText="<b>"+b.name+"</b><br><a href='/places/"+b.origin.slug+"/'>"+b.origin.name+"</a>":markerText=b.origin.name;var c=new google.maps.Marker({map:d,position:tmpLatLng,title:markerText,animation:google.maps.Animation.DROP,url:"/places/"+b.origin.slug+"/"});k.extend(tmpLatLng),q(c,d,j,markerText),g.push(c),h.addMarker(c),d.fitBounds(k)}})}function p(a){$.each(a,function(a,b){if(null!=b&&b.latitude){tmpLatLng=new google.maps.LatLng(b.latitude,b.longitude),b.name?markerText="<b>"+b.name+"</b><br><a href='/places/"+b.slug+"/'>"+b.name+"</a>":markerText=b.name;var c=new google.maps.Marker({map:d,position:tmpLatLng,title:markerText,animation:google.maps.Animation.DROP,url:"/places/"+b.slug+"/"});k.extend(tmpLatLng),q(c,d,j,markerText),g.push(c),h.addMarker(c),d.fitBounds(k)}})}var c=b+1,d=new google.maps.Map(document.getElementById("map"+c),e);d.mapTypes.set("grey",f),d.setMapTypeId("grey"),d.setOptions({zoomControl:!1,mapTypeControl:!1,streetViewControl:!1});var g=[],h=new MarkerClusterer(d),i=!0,j=new google.maps.InfoWindow({content:""}),k=new google.maps.LatLngBounds,l=$(this).find(".sense_id").text(),m=$(this).find(".artist-slug").text(),n=$(this).find(".place-slug").text();m?(a="/data/artists/"+m+"/",i=!1):n?(a="/data/places/"+n+"/",i=!1):a="/data/senses/"+l+"/artists/",$.getJSON(a,{csrfmiddlewaretoken:"{{csrf_token}}"},function(a){m?o(a.artists):n?p(a.places):o(a.senses)}),i||(zoomChangeBoundsListener=google.maps.event.addListener(d,"bounds_changed",function(a){this.setZoom(10)}));var q=function(a,b,c,d){google.maps.event.addListener(a,"click",function(){c.setContent(d),c.open(b,a)})}})}google.maps.event.addDomListener(window,"load",a)})});