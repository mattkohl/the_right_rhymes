function initializeMaps(){$.each($(".map-canvas"),function(t){var o=t+1,e=new mapboxgl.Map({container:"map"+o,scrollZoom:!1,tolerance:3.5,buffer:0,style:"mapbox://styles/mattkohl/cjzbh31rv0g3c1cpcos3l17xv"}),a=$(this).find(".sense_id").text(),n=$(this).find(".artist-slug").text(),i=$(this).find(".place-slug").text();n?endpoint="/data/artists/"+n+"/geojson?format=json":i?endpoint="/data/places/"+i+"/geojson?format=json":endpoint="/data/senses/"+a+"/artists/geojson?format=json",e.on("load",function(){$.getJSON(endpoint,{csrfmiddlewaretoken:"{{csrf_token}}"}).done(function(t){e.addSource("points",{type:"geojson",data:t}),e.addLayer({id:"heatmap-point",source:"points",type:"heatmap",paint:{"heatmap-weight":{property:"weight",type:"exponential",stops:[[0,0],[3,1]]},"heatmap-color":["interpolate",["linear"],["heatmap-density"],0,"rgba(33,102,172,0)",.2,"rgb(103,169,207)",.4,"rgb(209,229,240)",.6,"rgb(253,219,199)",.8,"rgb(239,138,98)",1,"rgb(178,24,43)"],"heatmap-radius":{stops:[[11,15],[15,20]]},"heatmap-opacity":{default:1,stops:[[14,1],[15,0]]}}}),e.addLayer({id:"circles-point",type:"circle",source:"points",minzoom:10,paint:{"circle-radius":{property:"weight",type:"exponential",stops:[[{zoom:10,value:1},5],[{zoom:10,value:62},10],[{zoom:17,value:1},20],[{zoom:17,value:62},50]]},"circle-color":{property:"weight",type:"exponential",stops:[[0,"rgba(236,222,239,0)"],[10,"rgb(236,222,239)"],[20,"rgb(208,209,230)"],[30,"rgb(166,189,219)"],[40,"rgb(103,169,207)"],[50,"rgb(28,144,153)"],[60,"rgb(1,108,89)"]]},"circle-stroke-color":"white","circle-stroke-width":1,"circle-opacity":{stops:[[14,0],[15,1]]}}}),e.addControl(new mapboxgl.NavigationControl);var o=new mapboxgl.LngLatBounds;t.features.forEach(function(t){o.extend(t.geometry.coordinates)}),e.fitBounds(o,{padding:50,maxZoom:12})})})})}mapboxgl.accessToken=mapsToken,initializeMaps();